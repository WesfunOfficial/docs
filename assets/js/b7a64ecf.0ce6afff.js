"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7],{701:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>o});var n=i(5893),r=i(1151);const t={sidebar_position:2},a="Upstreams",d={id:"packaging/recipes/upstreams",title:"Upstreams",description:"The majority of packages are built using upstream release sources. While it is possible to create packages manually from local assets, the bulk of packages take an upstream tarball and build it.",source:"@site/docs/packaging/recipes/upstreams.md",sourceDirName:"packaging/recipes",slug:"/packaging/recipes/upstreams",permalink:"/docs/packaging/recipes/upstreams",draft:!1,unlisted:!1,editUrl:"https://github.com/serpent-os/docs/tree/main/docs/packaging/recipes/upstreams.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"packageSidebar",previous:{title:"Overview",permalink:"/docs/packaging/recipes/overview"},next:{title:"Metadata",permalink:"/docs/packaging/recipes/metadata"}},c={},o=[{value:"Plain sources",id:"plain-sources",level:3},{value:"Additional options",id:"additional-options",level:4},{value:"Git sources",id:"git-sources",level:3},{value:"Additional options",id:"additional-options-1",level:4}];function l(e){const s={admonition:"admonition",code:"code",h1:"h1",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"upstreams",children:"Upstreams"}),"\n",(0,n.jsx)(s.p,{children:"The majority of packages are built using upstream release sources. While it is possible to create packages manually from local assets, the bulk of packages take an upstream tarball and build it."}),"\n",(0,n.jsx)(s.h3,{id:"plain-sources",children:"Plain sources"}),"\n",(0,n.jsx)(s.p,{children:"A plain source is one that simply has an upstream URI and can be unpacked in some fashion, i.e. a tarball. The hash must be provided for the\nupstream and accompanied by the SHA256 sum."}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",children:"upstreams:\n    - uri: $hash\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",children:"upstreams\n    - uri:\n        hash: $hash\n"})}),"\n",(0,n.jsx)(s.h4,{id:"additional-options",children:"Additional options"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Key"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"hash"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"SHA256 of the upstream source"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"stripdirs"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"Number of directories to remove from archive root"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"unpack"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"boolean"})}),(0,n.jsx)(s.td,{children:"Whether to automatically unpack archive or not"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"unpackdir"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"Force a different directory name when unpacking"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"git-sources",children:"Git sources"}),"\n",(0,n.jsxs)(s.p,{children:["A git source may be used, when providing either a ",(0,n.jsx)(s.code,{children:"tag"})," or ",(0,n.jsx)(s.code,{children:"ref"}),". In Serpent OS we forbid the use of ",(0,n.jsx)(s.code,{children:"branch"})," names in packaging, as they may mutate and break subsequent builds. Ideally a full git ref should be used."]}),"\n",(0,n.jsx)(s.admonition,{type:"caution",children:(0,n.jsxs)(s.p,{children:["Git repositories do work well with ",(0,n.jsx)(s.code,{children:"boulder"})," right now, however some ",(0,n.jsx)(s.code,{children:"submodule"})," based builds are under active testing."]})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",children:"upstreams:\n    - git|uri: $ref\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",children:"upstreams:\n    - git|uri:\n        ref: $ref\n"})}),"\n",(0,n.jsx)(s.h4,{id:"additional-options-1",children:"Additional options"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Key"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"ref"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"git ref when using git source"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"clonedir"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"Override clone target directory"})]})]})]})]})}function h(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},1151:(e,s,i)=>{i.d(s,{Z:()=>d,a:()=>a});var n=i(7294);const r={},t=n.createContext(r);function a(e){const s=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);